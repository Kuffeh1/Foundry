if (args[0].hitTargets[0] !== undefined) 
{
const lastArg = args[args.length - 1];
let tactor;
if (lastArg.tokenId) tactor = canvas.tokens.get(lastArg.tokenId).actor;
else tactor = game.actors.get(lasatArg.actorId);
let target = canvas.tokens.get(args[0].hitTargets[0]?._id); 

let damageRoll = new Roll(args[0].isCritical ? "1d6 + 6" : "1d6").roll(); 
let undeadRoll = new Roll(args[0].isCritical ? "2d6 + 12" : "2d6").roll(); 

let effect = tactor.effects.find(i=> i.data.label === "Crimson Rite - Dawn");

if(!effect){ // not there
}
  else if (target?.actor.data.data.details.type.value.toLowerCase() === "undead") { 
           new MidiQOL.DamageOnlyWorkflow(actor, token, undeadRoll.total, "radiant", target ? [target] : [], undeadRoll, {flavor: "Radiant damage against undead", itemCardId: args[0].itemCardId})
        }
    else { 
        new MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, "radiant", target ? [target] : [], damageRoll, {flavor: "Radiant", itemCardId: args[0].itemCardId})   
     }

let effect1 = tactor.effects.find(i=> i.data.label === "Crimson Rite - Flame");

if(!effect1){ // not there
}
  else      { 
        new MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, "fire", target ? [target] : [], damageRoll, {flavor: "Fire", itemCardId: args[0].itemCardId})
     
     }   
      
   }
